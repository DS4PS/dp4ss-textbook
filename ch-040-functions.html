<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Introduction to Functions</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="textbook.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">DATA SCIENCE I</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://ds4ps.org/cpp-526-fall-2019/textbook/">
    <span class="fa fa-sun fa-2x"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Introduction to Functions</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#computer-programs-as-recipes"><span class="toc-section-number">0.1</span> Computer Programs as Recipes</a></li>
<li><a href="#loan-calculator"><span class="toc-section-number">0.2</span> Loan Calculator</a></li>
<li><a href="#default-arguments"><span class="toc-section-number">1</span> Default Arguments</a><ul>
<li><a href="#defaults"><span class="toc-section-number">1.1</span> Defaults</a></li>
</ul></li>
<li><a href="#implicit-argument-calls"><span class="toc-section-number">2</span> Implicit Argument Calls</a></li>
<li><a href="#object-assignment-vs-argument-assignment"><span class="toc-section-number">3</span> Object Assignment vs Argument Assignment</a></li>
<li><a href="#your-turn"><span class="toc-section-number">4</span> Your Turn</a></li>
</ul>
</div>

<script src="https://cdn.datacamp.com/datacamp-light-latest.min.js"></script>
<p><img src="figures/function.png" /></p>
<div class="tip">
<h2 id="key-concepts">Key Concepts</h2>
<p>A function is a data recipe, and a building block of longer scripts.</p>
<p>You can think of functions as input-output machines that take raw data and transform it into useful statistics.</p>
<p>They accepts <strong>arguments</strong> (data or parameters), and <strong>return</strong> the requested calculation or transformation.</p>
<p>For example, the <strong>mean()</strong> function requires a vector of measurements as the input and return the average measure for the group as the output.</p>
<h3 id="vocabulary">VOCABULARY:</h3>
<ul>
<li>The function <code>function()</code></li>
<li>arguments</li>
<li>argument values</li>
<li>default values</li>
<li>explicit vs implicit argument calls</li>
<li>return values</li>
<li>arrow vs. equal sign</li>
</ul>
<p><br>
<br></p>
</div>
<div id="computer-programs-as-recipes" class="section level2">
<h2><span class="header-section-number">0.1</span> Computer Programs as Recipes</h2>
<p>Computer programs are powerful because they allow us to codify recipes for complex tasks, save them, share them, and build upon them.</p>
<p>In the simplest form, a computer program is like a recipe. We have inputs, steps, and outputs.</p>
<p>Ingredients:</p>
<ul>
<li>1/3 cup butter<br />
</li>
<li>1/2 cup sugar<br />
</li>
<li>1/4 cup brown sugar<br />
</li>
<li>2 teaspoons vanilla extract<br />
</li>
<li>1 large egg<br />
</li>
<li>2 cups all-purpose flour<br />
</li>
<li>1/2 teaspoon baking soda<br />
</li>
<li>1/2 teaspoon kosher salt<br />
</li>
<li>1 cup chocolate chips</li>
</ul>
<p>Instructions:</p>
<ol style="list-style-type: decimal">
<li>Preheat the oven to 375 degrees F.</li>
<li>In a large bowl, mix butter with the sugars until well-combined.</li>
<li>Stir in vanilla and egg until incorporated.</li>
<li>Addflour, baking soda, and salt.<br />
</li>
<li>Stir in chocolate chips.</li>
<li>Bake for 10 minutes.</li>
</ol>
<p>In R, the recipe would look something like this:</p>
<pre><code>function( butter=0.33, sugar=0.5, eggs=1, flour=2, temp=375 )
{
   dry.goods &lt;- combine( flour, sugar )
   batter &lt;- mix( dry.goods, butter, eggs )
   cookies &lt;- bake( batter, temp, time=10 )
   return( cookies )
}</code></pre>
<p>Note that this function to make cookies relies on other functions for each step, combine(), mix(), and bake(). Each of these functions would have to be defined as well, or more likely someone else in the open source community has already written a package called “baking” that contains simple functions for cooking so that you can use them for more complicated recipes.</p>
<p>You will find that R allows you to conduct powerful analysis primarily because you can build on top of and extend a lot of existing functionality.</p>
<div class="figure"><span id="fig:unnamed-chunk-1"></span>
<img src="figures/assignment.png" alt="Assignment of output values" width="590" />
<p class="caption">
Figure .: Assignment of output values
</p>
</div>
</div>
<div id="loan-calculator" class="section level2">
<h2><span class="header-section-number">0.2</span> Loan Calculator</h2>
<p>Let’s look at a slightly more comlicated example by creating an amortization calculator to determine monthly payments that would be required from a home mortgage loan.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<img src="figures/calculate-amortization.jpg" alt="Example monthly payment based upon loan amount (P), interest rate (R), and time period of repayment (T)." width="50%" />
<p class="caption">
Figure .: Example monthly payment based upon loan amount (P), interest rate (R), and time period of repayment (T).
</p>
</div>
<p>Where:</p>
<ul>
<li>T = time of loan period</li>
<li>P = loan principal, or total amount borrowed</li>
<li>R = annual interest rate, or annual percentage rate (APR)</li>
</ul>
<p>A mortgage calculator considers the total loan amount (the principal), the interest rate or APR (annual percentage rate), and the period of the loan in order to determine how much needs to be paid each month so that payments are distributed equally across the loan term. If we look up a formula, we will find:</p>
<p><img src="figures/amortization-formula.jpg" /></p>
<p>We can simplify this formula a bit by putting everything in monthly periods:</p>
<p><span class="math display">\[
PAYMENTS = \frac{principal \cdot interest \ rate}{1-(1+interest \ rate)^{- \ months}}
\]</span></p>
<p>Where:</p>
<ul>
<li>months = years <strong>T</strong> x 12 months</li>
<li>interest rate (monthly) = annual interest rate <strong>R</strong> / 12 months</li>
</ul>
<p>When we translate this mathematical formula into R code, the new function will look like this:</p>
<pre class="r"><code> calcMortgage &lt;- function( principal, years, APR )
 {
   
    months &lt;- years * 12   # covert years to months
    int.rate &lt;- APR / 12   # convert annual rate to monthly
    
    # amortization formula
    monthly.payment &lt;- ( principal * int.rate ) / 
                       (1 - (1 + int.rate)^(-months) )
    
    monthly.payment &lt;- round( monthly.payment, 2 )
    
    return( monthly.payment )
 
 }</code></pre>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJwcmVfZXhlcmNpc2VfY29kZSI6IiBjYWxjTW9ydGdhZ2UgPC0gZnVuY3Rpb24oIHByaW5jaXBhbCwgeWVhcnMsIEFQUiApXG4ge1xuICAgIG1vbnRocyA8LSB5ZWFycyAqIDEyXG4gICAgaW50LnJhdGUgPC0gQVBSIC8gMTJcbiAgICBcbiAgICAjIGFtb3J0aXphdGlvbiBmb3JtdWxhXG4gICAgbW9udGhseS5wYXltZW50IDwtICggcHJpbmNpcGFsICogaW50LnJhdGUgKSAvIFxuICAgICAgICAgICAgICAgICAgICAgICAoMSAtICgxICsgaW50LnJhdGUpXigtbW9udGhzKSApXG4gICAgXG4gICAgbW9udGhseS5wYXltZW50IDwtIHJvdW5kKCBtb250aGx5LnBheW1lbnQsIDIgKVxuICAgIFxuICAgIHJldHVybiggbW9udGhseS5wYXltZW50IClcbiBcbiB9Iiwic2FtcGxlIjoiIyBDaGVjayB0aGUgZnVuY3Rpb24ncyBhcmd1bWVudHM6XG5hcmdzKCBjYWxjTW9ydGdhZ2UgKVxuXG4jIENhbGN1bGF0ZSBhIG1vcnRnYWdlIGZvciBhICQxMDAsMDAwIGhvdXNlIGZvciAzMCB5ZWFycyB3aXRoIGEgNC41IHBlcmNlbnQgaW50ZXJlc3QgcmF0ZSAoMC4wNDUgQVBSKVxuY2FsY01vcnRnYWdlKCBwcmluY2lwYWw9MTAwMDAwLCB5ZWFycz0zMCwgQVBSPTAuMDQ1ICkgXG5cbiMgVHJ5OiBjYWxjTW9ydGdhZ2UoIHByaW5jaXBhbD0xMDAwMDAgKVxuY2FsY01vcnRnYWdlKCBwcmluY2lwYWw9MTAwMDAwLCBBUFI9MC4wNDUgKSJ9
</div>
<div class="question">
<p>What happens if you omit an argument from the function? Why?</p>
</div>
</div>
<div id="default-arguments" class="section level1">
<h1><span class="header-section-number">1</span> Default Arguments</h1>
<p>We can add default values for arguments. These defaults allow us to utilize the function without specifying values for those arguments.</p>
<pre class="r"><code> calcMortgage &lt;- function( principal, years=30, APR=0.05 )
 {
   
    months &lt;- years * 12   # covert years to months
    int.rate &lt;- APR / 12   # convert annual rate to monthly
    
    # amortization formula
    monthly.payment &lt;- ( principal * int.rate ) / 
                       (1 - (1 + int.rate)^(-months) )
    
    monthly.payment &lt;- round( monthly.payment, 2 )
    
    return( monthly.payment )
 
 }</code></pre>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJwcmVfZXhlcmNpc2VfY29kZSI6IiBjYWxjTW9ydGdhZ2UgPC0gZnVuY3Rpb24oIHByaW5jaXBhbCwgeWVhcnM9MzAsIEFQUj0wLjA1IClcbiB7XG4gICAgbW9udGhzIDwtIHllYXJzICogMTJcbiAgICBpbnQucmF0ZSA8LSBBUFIgLyAxMlxuICAgIFxuICAgICMgYW1vcnRpemF0aW9uIGZvcm11bGFcbiAgICBtb250aGx5LnBheW1lbnQgPC0gKCBwcmluY2lwYWwgKiBpbnQucmF0ZSApIC8gXG4gICAgICAgICAgICAgICAgICAgICAgICgxIC0gKDEgKyBpbnQucmF0ZSleKC1tb250aHMpIClcbiAgICBcbiAgICBtb250aGx5LnBheW1lbnQgPC0gcm91bmQoIG1vbnRobHkucGF5bWVudCwgMiApXG4gICAgXG4gICAgcmV0dXJuKCBtb250aGx5LnBheW1lbnQgKVxuIFxuIH0iLCJzYW1wbGUiOiIjIE5vdGljZSB0aGUgbmV3IGRlZmF1bHQgYXJndW1lbnRzOlxuYXJncyggY2FsY01vcnRnYWdlIClcblxuIyBDYWxjdWxhdGUgYSBtb3J0Z2FnZSBmb3IgYSAkMTAwLDAwMCBob3VzZSBmb3IgMzAgeWVhcnMgd2l0aCBhIDQuNSBwZXJjZW50IEFQUlxuY2FsY01vcnRnYWdlKCBwcmluY2lwYWw9MTAwMDAwLCB5ZWFycz0zMCwgQVBSPTAuMDQ1IClcblxuIyBOb3cgdHJ5OiBjYWxjTW9ydGdhZ2UoIHByaW5jaXBhbD0xMDAwMDAgKVxuY2FsY01vcnRnYWdlKCBwcmluY2lwYWw9MTAwMDAwICkifQ==
</div>
<div class="question">
<p>Note that <strong>calcMortgage( principal=100000 )</strong> now works because the function uses the default values for years and APR.</p>
</div>
<div id="defaults" class="section level2">
<h2><span class="header-section-number">1.1</span> Defaults</h2>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJwcmVfZXhlcmNpc2VfY29kZSI6IiBjYWxjTW9ydGdhZ2UgPC0gZnVuY3Rpb24oIHByaW5jaXBhbCwgeWVhcnM9MzAsIEFQUj0wLjA0NSApXG4ge1xuICAgIG1vbnRocyA8LSB5ZWFycyAqIDEyXG4gICAgaW50LnJhdGUgPC0gQVBSIC8gMTJcbiAgICBcbiAgICAjIGFtb3J0aXphdGlvbiBmb3JtdWxhXG4gICAgbW9udGhseS5wYXltZW50IDwtICggcHJpbmNpcGFsICogaW50LnJhdGUgKSAvIFxuICAgICAgICAgICAgICAgICAgICAgICAoMSAtICgxICsgaW50LnJhdGUpXigtbW9udGhzKSApXG4gICAgXG4gICAgbW9udGhseS5wYXltZW50IDwtIHJvdW5kKCBtb250aGx5LnBheW1lbnQsIDIgKVxuICAgIFxuICAgIHJldHVybiggbW9udGhseS5wYXltZW50IClcbiBcbiB9Iiwic2FtcGxlIjoiYXJncyggY2FsY01vcnRnYWdlIClcblxuIyBDYWxjdWxhdGUgYSBtb3J0Z2FnZSBmb3IgYSAkMTAwLDAwMCBob3VzZSBmb3IgMTUgeWVhcnMgd2l0aCBhIDMgcGVyY2VudCBBUFJcblxuY2FsY01vcnRnYWdlKCBwcmluY2lwYWw9MTAwMDAwLCB5ZWFycz0xNSwgQVBSPTAuMDMgKSJ9
</div>
<div class="question">
<p>Can you still use custom values for those arguments after defaults are set?</p>
</div>
</div>
</div>
<div id="implicit-argument-calls" class="section level1">
<h1><span class="header-section-number">2</span> Implicit Argument Calls</h1>
<p>An explicit call to arguments always uses the formal argument name such as <code>principal=100000</code>.</p>
<p>You can, however, also use implicit argument calls. These rely on the order arguments are specified in the function, and the order of your values in your call.</p>
<p>Implicit arguments calls can be risky, however, because it is very easy to mix them up.</p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJwcmVfZXhlcmNpc2VfY29kZSI6IiBjYWxjTW9ydGdhZ2UgPC0gZnVuY3Rpb24oIHByaW5jaXBhbCwgeWVhcnM9MzAsIEFQUj0wLjA0NSApXG4ge1xuICAgIG1vbnRocyA8LSB5ZWFycyAqIDEyXG4gICAgaW50LnJhdGUgPC0gQVBSIC8gMTJcbiAgICBcbiAgICAjIGFtb3J0aXphdGlvbiBmb3JtdWxhXG4gICAgbW9udGhseS5wYXltZW50IDwtICggcHJpbmNpcGFsICogaW50LnJhdGUgKSAvIFxuICAgICAgICAgICAgICAgICAgICAgICAoMSAtICgxICsgaW50LnJhdGUpXigtbW9udGhzKSApXG4gICAgXG4gICAgbW9udGhseS5wYXltZW50IDwtIHJvdW5kKCBtb250aGx5LnBheW1lbnQsIDIgKVxuICAgIFxuICAgIHJldHVybiggbW9udGhseS5wYXltZW50IClcbiBcbiB9Iiwic2FtcGxlIjoiIyBUcnkgdGhlc2U6XG5cbmNhbGNNb3J0Z2FnZSggMTAwMDAwLCAzMCwgMC4wNSApXG5cbmNhbGNNb3J0Z2FnZSggMzAsIDEwMDAwMCwgMC4wNSApIn0=
</div>
<div class="question">
<p>Which of these calculations is correct?</p>
<p>Explain why.</p>
</div>
</div>
<div id="object-assignment-vs-argument-assignment" class="section level1">
<h1><span class="header-section-number">3</span> Object Assignment vs Argument Assignment</h1>
<p>Assignment is the process of assigning a name to an object or value in order to store the data for future use and allow it to be referenced later.</p>
<pre class="r"><code>x &lt;- 3</code></pre>
<p>We use assignment in data recipes (scripts) to save values, and in functions to assign values to specific arguments. Note that we use different assignment operators in each case.</p>
<p>Object assignment uses the <strong>arrow operator</strong>.</p>
<p>Argument assignment inside a function uses the <strong>equal sign</strong>.</p>
<pre class="r"><code>principal &lt;- 100000               # never use equals here
calcMortgage( principal=100000 )  # never use arrows here</code></pre>
<p><br></p>
<div class="figure"><span id="fig:unnamed-chunk-16"></span>
<img src="figures/assignment.png" alt="Assignment of output values" width="590" />
<p class="caption">
Figure 3.1: Assignment of output values
</p>
</div>
<hr />
</div>
<div id="your-turn" class="section level1">
<h1><span class="header-section-number">4</span> Your Turn</h1>
<div class="quiz">
<p>Create a function to convert Fahrenheit temperatures to Celsius.</p>
<ul>
<li>What arguments do you need?</li>
<li>How many decimals do you need? Consider using the <code>round( number, decimals )</code> function to simplify output.</li>
<li>Don’t forget a return statement!</li>
</ul>
</div>
<p><span class="math display">\[
celsius = ( \ fahrenheit − 32 \ ) × \frac{5}{9}
\]</span></p>
<p>If you want to check your work, <strong>212 degees Fahrenheit</strong> is equivalent to <strong>100 degrees Celsius</strong>.</p>
<p><br></p>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJjb252ZXJ0VG9DZWxzaXVzIDwtIGZ1bmN0aW9uKCkgICMgYXJndW1lbnRzIGhlcmVcbntcbiAgICAjIHlvdXIgY29kZSBoZXJlXG59XG5cbnRlbXAuaW4uZmFocmVuaGVpdCA8LSAyMTJcbmNvbnZlcnRUb0NlbHNpdXMoIHRlbXAuaW4uZmFocmVuaGVpdCApIn0=
</div>
<div class="question">
<p>Can you use this function to convert from Celsius to Fahrenheit?</p>
</div>
<p><br></p>
<hr />
<p><br>
<br></p>
</div>

<div class="footer">
<div class="row"  align="center">

  Notes for the <a href=http://ds4ps.org/ms-prog-eval-data-analytics/ target="_blank">MS in Program Evaluation and Data Analytics</a><br>
  A program at <a href=https://asuonline.asu.edu/online-degree-programs/graduate/program-evaluation-and-data-analytics-ms/ target="_blank">Arizona State University</a><br>
  Website powered by <a href=https://rmarkdown.rstudio.com/ target="_blank">R Markdown</a> and <a href=http://jekyllrb.com target="_blank">Jekyll</a>

<br>
<br>

</div>
</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
